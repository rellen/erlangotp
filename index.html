<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Erlang &amp OTP - A Quick Introduction...</title>

		<meta name="description" content="A quick introduction to the functional programming language and platfrom Erlang and the OTP libraries">
		<meta name="author" content="Robert Ellen <rellen@ieee.org>">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>Erlang and the OTP libraries</h1>
					<h3>A quick introduction...</h3>
					<p>
						<small>Robert Ellen</small>
					</p>
				</section>

				<section>
					<section>
						<h2>Summary</h2>
					</section>
					<section>
						Erlang and the Open Telecom Platform (OTP) are a language, system and platform that are well-established but experiencing a resurgence in popularity
					</section>
					<section>
						PROMINENT PRODUCTS AND USERS
					</section>
					<section>
						<h3>Erlang and the OTP libraries</h3><p> are a 'battle-tested' platform for developing (soft) real-time software with very high: <ul><li>up-times</li><li> availability</li><li>fault-tolerance</li><li>scalability</li><li> reliability</li></ul></p>
					</section>

					<section>
						While Erlang as a language is simple (and controversial), it is the power and reliability of the Erlang runtime/VM and the OTP libraries that make the Erlang platform a compelling choice for developing robust (soft) real-time software
					</section>

					
					
					
				</section>
				<section>
						<h2>About me...</h2>
						<ul>
							<li>electronics/ software engineer by qualification</li>
							<li>long-term contractor at Carlton &amp; Unitied Breweries' Yatala brewery</li>
							<li>software development and industrial informatics a.k.a. plant information systems</li>
							<li>interested in FP due to ongoing Masters-level research into data-flow programming and functional reactive programming (FRP)</li>
							<li>using Erlang (among other tools) to implement/ demonstrate my ideas</li>
						</ul>

					</section>
				<section>
					<section>
						<h2>Overview</h2>
						<ul>
							<li>What is Erlang?</li>
							<li>A quick history lesson</li>
							<li>basics of the language</li>
							<li>the runtime system</li>
							<li>more advanced features</li>
							<li>The OTP libraries</li>
							<li>Uses: What, where and how</li>
							<li>Next steps</li>

						</ul>
					</section>
					

				</section>

				<section>
						<h3>What is Erlang?</h3>

						<p>Erlang is a dynamic programming language with functional features</p>

						<p>Labeling Erlang a functional language is somewhat controversial, especially if it is compared against FP languages such as Haskell</p>

						<p>The sequential sub-set of Erlang is, however, pretty much functional</p>
						
					</section>

					<section>
						<h3>What is Erlang?</h3>

						<p>Erlang has a runtime system (ERTS) that provides powerful and efficient concurrency, parallelism and distribution</p>
						
					</section>

					<section>
						<h3>What is Erlang?</h3>

						<p>The Erlang distribution comes with a set of libraries known as the Open Telecom Platform (OTP) that actually allow the Erlang platform to do what it says it can do on the box, with regards to robustness etc</p>
						
					</section>

					<section>
						<h3>What is Erlang?</h3>

						<p>Most of the time, when we think of Erlang and its capabilities, we are really referring to ERTS and OTP</p>

					</section>

				<section>
					<h2>A brief history of Erlang and OTP</h2>
					<p>Summary from Erlang Programming, Cesarini &amp; Thompson O'Reilly Media Inc, and various resources found on the Erlang Wikipedia entry</p>
							


				</section>


				<section>
					Mid 1980's - Ericsson's Computer Science Laboratory tasked with investigating languages for next generation telecomm products

				</section>

				<section>
					<p>Joe Armstrong, Robert Virding and Mike Williams were tasked with prototyping telecom applications with existing languages</p>
					<p>They found that no one language provided everything that a telecom application needed</p>
					<p>A decision was made to invent a new language</p>
					<p>Erlang (Ericsson Language) was born!</p>

				</section>

				<section>
					<p>Erlang was influenced by several languages</p>
					<ul>
						<li>functional: ML, Miranda</li>
						<li>concurrent: Ada, Modula, Chill</li>
						<li>logic: Prolog </li>
						<li>others: Smalltalk (code upgrade) and EriPascal and PLEX (older Ericsson languages)</li>
					</ul>


				</section>

				<section>
					<p>Originally implemented with a Prolog VM, Erlang was refined over four years</p>
					<p>Mike Williams wrote the first C-based VM in 1991</p>
					<p>In 1992 the first commercial Erlang-based project was started and was launched in 1994</p>

				</section>

				<section>
					<p>In 1995, Erlang was mature enough to be used in larger telephony projects</p>
					<p>The OTP libraries were released in 1996</p>
					<p>In 1998, the AXD301 switch was announced, and reportedly has 1-2 million lines of Erlang and achieved nine 9's uptime</p>

				</section>

				<section>
					<p>In early 1998, Erlang was banned from Ericsson, citing a want to be a consumer of software technologies, not a producer</p>
					<p>Joe Armstrong and many of the Erlang team left Ericsson at that time</p>
					<p>In late 1998, Erlang and OTP were released under an Open Source license and have been freely available ever since</p>
					<p>Subsequently the ban has been lifted and Armstrong rejoined Ericsson in 2004</p>

				</section>

				<section>
					<h2>Basics of the language</h2>
				</section>

				<section>
					<section>
						<h3>Erlang, as a language, is fairly simple and concise</h3>
						<ul>
							<li>Sequential subset</li>
							<ul>
								<li>strictly evaluated</li>
								<li>has a simple dynamic, yet strong type system</li>
								<li>has single assignment on 'variables'</li>
							</ul>
							<li>has its concurrency features built into the language and type system themselves (not a library)</li>
							 	<ul>
							 		<li>spawning, linking and message passing between light-weight processes</li>
							 	</ul>
						</ul>
					</section>

					

					<section>
						<h3>But is it a functional language?</h3>

						<p>Erlang doesn't have the functional programming machinery of Haskell or Scala...</p>

						<p>...but it's certainly not without plenty of features you'd expect in a language that is functional...</p>

						<p>...and the sequential sub-set of the language can be considered functional</p>

					</section>
					
					<section>
						<h3>Functional language features</h3> 
						<ul>
							<li>Lambda expressions and closures are simple...</li>
							<li>...but currying and partial application are hard, if not impossible</li>
							<li>powerful pattern matching, moving conditional logic to the outside</li>
							<li>strictly/ eagerly evaluated, so no infinite lists etc</li>
							<li>functions, while declarative and SSA, are impure, side effects can occur in any context, deep in the call stack...</li>
							<li>...but it could be argued, however, that side-effects (such as I/O) occur only in the concurrent part of the language (through the actor/ process interface [more later])</li>
						</ul>
					</section>
					<section>
						<h3>Compiler</h3>
						<p>Erlang compiler (erlc) is not as powerful as, say, GHC</p>
						<br />

						<p>For example, it is not as helpful with things such as automatic loop/fold simplification</p>
					
					</section>

				</section>

				<section>
					<h3>Selected features in (a little) detail</h3>
				</section>

				<section>
						<h3>Concise set of basic types</h3>
						<p>Primitives</p>
						<ul>
							<li>Numbers (integers, floats)</li>
							<li>Atoms (like symbols)</li>
							<li>References</li>
							<li>Binaries - excellent expressiveness</li>
							<li>Pids - process identifiers for Erlang processes (more later)</li>
							<li>Ports</li>
							<li>Funs - first-class function variables / closures</li>
						</ul>
					</section>

				<section>
						<h3>Concise set of basic types</h3>
						
						<p>Compounds</p>
						<ul>
							<li>Tuples (like structures)</li>
							<li>Lists</li>
							<ul>
								<li>cons syntax</li>
								<li>comprehension syntax</li>
								<li>abstractions and traversals</li>
							</ul>
						</ul>

					</section>
				
				<section>
					<h2>Modules and Functions</h2>
				</section>

				<section>
					<h3>Modules</h3>
					<ul>
						<li>are a collection of functions and other declarations and definitions</li>
						<li>have a name, and are implemented in a file called <code>moduleName.erl</code></li>
						<li>flat name space</li>
					</ul>
				</section>

				<section>
					<h3>A simple module</h3>

<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">-<span style="color: #999999; font-weight: bold">module</span>(my_module). <span style="color: #008800; font-style: italic">% module name</span>
<span style="color: #008800; font-style: italic">% module attributes</span>
-<span style="color: #999999; font-weight: bold">export</span>([add<span style="color: #666666">/2</span>, square<span style="color: #666666">/1</span>, square_add<span style="color: #666666">/2</span>, print_square<span style="color: #666666">/1</span>]). <span style="color: #008800; font-style: italic">% functions (with arity) to be exported</span>

<span style="color: #008800; font-style: italic">% function declarations</span>

<span style="color: #00A000">add</span>(<span style="color: #B8860B">X</span>,<span style="color: #B8860B">Y</span>) <span style="color: #666666">-&gt;</span>
	<span style="color: #B8860B">X</span> <span style="color: #666666">+</span> <span style="color: #B8860B">Y</span>.

<span style="color: #00A000">square</span>(<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span>
	<span style="color: #B8860B">X</span> <span style="color: #666666">*</span> <span style="color: #B8860B">X</span>.

<span style="color: #00A000">square_add</span>(<span style="color: #B8860B">X</span>,<span style="color: #B8860B">Y</span>) <span style="color: #666666">-&gt;</span>
	<span style="color: #B8860B">Z</span> <span style="color: #666666">=</span> add(<span style="color: #B8860B">X</span>,<span style="color: #B8860B">Y</span>),
	square(<span style="color: #B8860B">Z</span>).

<span style="color: #00A000">print_square</span>(<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span>
	<span style="color: #0000FF; font-weight: bold">io</span>:<span style="color: #00A000">format</span>(<span style="color: #BB4444">&quot;The square of </span><span style="color: #BB6688; font-weight: bold">~p</span><span style="color: #BB4444"> is: </span><span style="color: #BB6688; font-weight: bold">~p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BB4444">&quot;</span>, [<span style="color: #B8860B">X</span>, square(<span style="color: #B8860B">X</span>)]).
</pre></div>



				</section>

				<section>
					<h3>Compiling and using my_module</h3>

<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">shell V5.10.3  (abort with ^G)</span>
<span style="color: #000080; font-weight: bold">1&gt;</span> c(my_module).
<span style="color: #888888">{ok,my_module}</span>
<span style="color: #000080; font-weight: bold">2&gt;</span> <span style="color: #0000FF; font-weight: bold">my_module</span>:<span style="color: #00A000">add</span>(<span style="color: #666666">1</span>,<span style="color: #666666">2</span>).
<span style="color: #888888">3</span>
<span style="color: #000080; font-weight: bold">3&gt;</span> <span style="color: #0000FF; font-weight: bold">my_module</span>:<span style="color: #00A000">square_add</span>(<span style="color: #666666">3</span>,<span style="color: #666666">5</span>).
<span style="color: #888888">64</span>
<span style="color: #000080; font-weight: bold">4&gt;</span> <span style="color: #0000FF; font-weight: bold">my_module</span>:<span style="color: #00A000">print_square</span>(<span style="color: #666666">9</span>).
<span style="color: #888888">The square of 9 is: 81</span>
<span style="color: #888888">ok</span>
<span style="color: #000080; font-weight: bold">5&gt;</span> 
</pre></div>




<br /><ul><li>Line 1 (<code>c(my_module).</code>) creates <code>my_module.beam</code>, which is the byte-code file for the module that gets executed</li>
<li> <code>my_module.beam</code> can also be generated by the Erlang compiler on the command-line with <code>$erlc my_module.erl</code></li></ul>  

				</section>

				<section>
					<h3>Recursion</h3>
					<p class="fragment">Erlang does not have loops, recursion is used instead</p>

<!-- HTML generated using hilite.me --><div class="fragment" style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">-<span style="color: #999999; font-weight: bold">module</span>(factorial).

-<span style="color: #999999; font-weight: bold">export</span>([fac<span style="color: #666666">/1</span>]).

<span style="color: #00A000">fac</span> (<span style="color: #666666">0</span>) <span style="color: #666666">-&gt;</span> <span style="color: #666666">1</span>;
<span style="color: #00A000">fac</span> (<span style="color: #B8860B">N</span>) <span style="color: #AA22FF; font-weight: bold">when</span> <span style="color: #B8860B">N</span> <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span> <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">N</span> <span style="color: #666666">*</span> fac(<span style="color: #B8860B">N</span><span style="color: #666666">-1</span>).
</pre></div>


				</section>

				
				<section>
					<h3>Recursion and Tail-Call Optimisation</h3>
					<ul>
						<li class="fragment">In many languages, Erlang included, recursion is fraught with danger, as each recursive call consumes stack</p>
						<li class="fragment">In many languages, Erlang included, an optimisation that can avoid this problem called Tail Call Optimisation (TCO), is included in the compiler</p>
						<li class="fragment">If a recursive call is the final call in a function (a tail call), no stack is consumed</p>
						<li class="fragment">The old stack frame is effectively replaced with the frame of the recursive call</p>
					</ul>
				</section>

				<section>
					<h3>Recursion and Tail-Call Optimisation</h3>
					<p class="fragment">We can re-write factorial to use a tail-call, by introducing an accumulator, a standard FP pattern</p>
					<!-- HTML generated using hilite.me --><div class="fragment" style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">-<span style="color: #999999; font-weight: bold">module</span>(factorial).
<span style="color: #008800; font-style: italic">% pretty much the same example as http://learnyousomeerlang.com/recursion</span>
-<span style="color: #999999; font-weight: bold">export</span>([fac<span style="color: #666666">/1</span>, tail_fac<span style="color: #666666">/1</span>]).

<span style="color: #00A000">fac</span> (<span style="color: #666666">0</span>) <span style="color: #666666">-&gt;</span> <span style="color: #666666">1</span>;
<span style="color: #00A000">fac</span> (<span style="color: #B8860B">N</span>) <span style="color: #AA22FF; font-weight: bold">when</span> <span style="color: #B8860B">N</span> <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span> <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">N</span> <span style="color: #666666">*</span> fac(<span style="color: #B8860B">N</span><span style="color: #666666">-1</span>).

<span style="color: #00A000">tail_fac</span>(<span style="color: #B8860B">N</span>) <span style="color: #666666">-&gt;</span> tail_fac(<span style="color: #B8860B">N</span>, <span style="color: #666666">1</span>).

<span style="color: #00A000">tail_fac</span>(<span style="color: #666666">0</span>, <span style="color: #B8860B">Acc</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">Acc</span>;
<span style="color: #00A000">tail_fac</span>(<span style="color: #B8860B">N</span>, <span style="color: #B8860B">Acc</span>) <span style="color: #AA22FF; font-weight: bold">when</span> <span style="color: #B8860B">N</span> <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span> <span style="color: #666666">-&gt;</span> tail_fac(<span style="color: #B8860B">N</span><span style="color: #666666">-1</span>, <span style="color: #B8860B">N</span><span style="color: #666666">*</span><span style="color: #B8860B">Acc</span>).
</pre></div>


<ul>
<li class="fragment">The tail-recursive version protects against excessive stack usage</li>
<li class="fragment">However, even with TCO, tail-recursive implementations are not necessarily faster than their body-recursive counterparts</li>
</ul>

				</section>

				<section>
					<h3>Higher Order Functions</h3>
					<p>Key functional programming capability - create, pass around and call functions as variables</p>

					<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">Eshell V5.10.3  (abort with ^G)</span>
<span style="color: #000080; font-weight: bold">1&gt;</span> <span style="color: #B8860B">Fa</span> <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">+</span> <span style="color: #666666">1</span> <span style="color: #AA22FF; font-weight: bold">end</span>.
<span style="color: #888888">#Fun&lt;erl_eval.6.80484245&gt;</span>
<span style="color: #000080; font-weight: bold">2&gt;</span> <span style="color: #B8860B">Fa</span>(<span style="color: #666666">2</span>).
<span style="color: #888888">3</span>
</pre></div>


				</section>

				<section>
					<h3>Closures</h3>
					<p>Annonymously-created functions remember their calling context</p>
					<p>This capability can be used to implement closures - functions that are 'customised' by their calling context to be used later</p>
					<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #000080; font-weight: bold">3&gt;</span> <span style="color: #B8860B">Fb</span> <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">fun</span>(<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span> <span style="color: #AA22FF; font-weight: bold">fun</span>(<span style="color: #B8860B">Y</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">+</span> <span style="color: #B8860B">Y</span> <span style="color: #AA22FF; font-weight: bold">end</span> <span style="color: #AA22FF; font-weight: bold">end</span>.
<span style="color: #888888">#Fun&lt;erl_eval.6.80484245&gt;</span>
<span style="color: #000080; font-weight: bold">4&gt;</span> <span style="color: #B8860B">Fc</span> <span style="color: #666666">=</span> <span style="color: #B8860B">Fb</span>(<span style="color: #666666">5</span>).
<span style="color: #888888">#Fun&lt;erl_eval.6.80484245&gt;</span>
<span style="color: #000080; font-weight: bold">5&gt;</span> <span style="color: #B8860B">Fc</span>(<span style="color: #666666">2</span>).
<span style="color: #888888">7</span>
<span style="color: #000080; font-weight: bold">6&gt;</span> <span style="color: #B8860B">Fd</span> <span style="color: #666666">=</span> <span style="color: #B8860B">Fb</span>(<span style="color: #666666">10</span>).
<span style="color: #888888">#Fun&lt;erl_eval.6.80484245&gt;</span>
<span style="color: #000080; font-weight: bold">7&gt;</span> <span style="color: #B8860B">Fd</span>(<span style="color: #666666">2</span>). 
<span style="color: #888888">12</span>
<span style="color: #000080; font-weight: bold">8&gt;</span> <span style="color: #B8860B">Fc</span>(<span style="color: #666666">2</span>).
<span style="color: #888888">7</span>
<span style="color: #000080; font-weight: bold">9&gt;</span> 
</pre></div>



				</section>

				<section>
					<h3>List HoFs</h3>
					<code>lists</code> module
					<p><code>filter, map, foldl, foldr, foreach</code></p>
					<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .1em;padding:.2em .2em;"><pre style="width: 99%;margin: 0; line-height: 125%"><span style="color: #888888">Eshell V5.10.3  (abort with ^G)</span>
<span style="color: #000080; font-weight: bold">1&gt;</span> <span style="color: #0000FF; font-weight: bold">lists</span>:<span style="color: #00A000">filter</span>(<span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">&gt;</span> <span style="color: #666666">3</span> <span style="color: #AA22FF; font-weight: bold">end</span>,[<span style="color: #666666">1</span>,<span style="color: #666666">2</span>,<span style="color: #666666">3</span>,<span style="color: #666666">4</span>,<span style="color: #666666">5</span>,<span style="color: #666666">6</span>]).
<span style="color: #888888">[4,5,6]</span>
<span style="color: #000080; font-weight: bold">2&gt;</span> <span style="color: #0000FF; font-weight: bold">lists</span>:<span style="color: #00A000">map</span>(<span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">X</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">*</span> <span style="color: #B8860B">X</span> <span style="color: #AA22FF; font-weight: bold">end</span>,[<span style="color: #666666">1</span>,<span style="color: #666666">2</span>,<span style="color: #666666">3</span>,<span style="color: #666666">4</span>,<span style="color: #666666">5</span>,<span style="color: #666666">6</span>]).   
<span style="color: #888888">[1,4,9,16,25,36]</span>
<span style="color: #000080; font-weight: bold">3&gt;</span> <span style="color: #0000FF; font-weight: bold">lists</span>:<span style="color: #00A000">foldr</span>(<span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">X</span>,<span style="color: #B8860B">Z</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">*</span> <span style="color: #B8860B">Z</span> <span style="color: #AA22FF; font-weight: bold">end</span>, <span style="color: #666666">1</span>, [<span style="color: #666666">1</span>,<span style="color: #666666">2</span>,<span style="color: #666666">3</span>,<span style="color: #666666">4</span>,<span style="color: #666666">5</span>,<span style="color: #666666">6</span>]).
<span style="color: #888888">720</span>
<span style="color: #000080; font-weight: bold">4&gt;</span> <span style="color: #B8860B">SumList</span> <span style="color: #666666">=</span> <span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">List</span>) <span style="color: #666666">-&gt;</span> <span style="color: #0000FF; font-weight: bold">lists</span>:<span style="color: #00A000">foldr</span> (<span style="color: #AA22FF; font-weight: bold">fun</span> (<span style="color: #B8860B">X</span>, <span style="color: #B8860B">Z</span>) <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">X</span> <span style="color: #666666">+</span> <span style="color: #B8860B">Z</span> <span style="color: #AA22FF; font-weight: bold">end</span>, <span style="color: #666666">0</span>, <span style="color: #B8860B">List</span>) <span style="color: #AA22FF; font-weight: bold">end</span>.
<span style="color: #888888">#Fun&lt;erl_eval.6.80484245&gt;</span>
<span style="color: #000080; font-weight: bold">5&gt;</span> <span style="color: #B8860B">SumList</span>([<span style="color: #666666">1</span>,<span style="color: #666666">2</span>,<span style="color: #666666">3</span>,<span style="color: #666666">4</span>,<span style="color: #666666">5</span>,<span style="color: #666666">6</span>]).
<span style="color: #888888">21</span>
<span style="color: #000080; font-weight: bold">6&gt;</span> 
</pre></div>


				</section>

				<section>
					<h2>Concurrency</h2>
					<p>Built into the language and runtime, not the OS and not a library</p>
					<p>The concurrency model is asynchronous message passing between light-weight processes</p>
					<p>Often referred to as the actor model</p>

				</section>

				<section>
					<h3>Erlang processes</h3>
					Light-weight processes, actor model, message passing

				</section>

				<section>
					<h3>Spawning a process</h3>

					<p class="fragment"><code>
Pid = spawn(module, function, [Argument0, Argument1, ..., ArgumentN]).
    </code></p>
    <p class="fragment"><code>Pid</code> is the process identifier of the newly spawned process</p>

				</section>

				<section>
					<h3>Sending a message</h3>

					<p class="fragment"><code>Pid ! Message.</code></p>
    				<p class="fragment"><code>Message</code> can be any Erlang term</p>

				</section>

				<section>
					<h3>Receiving a message</h3>
					<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #AA22FF; font-weight: bold">receive</span>
    <span style="color: #B8860B">Pattern1</span> <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">Expression1</span>;
    <span style="color: #B8860B">Pattern2</span> <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">Expression2</span>;
    ...
    <span style="color: #B8860B">PatternN</span> <span style="color: #666666">-&gt;</span> <span style="color: #B8860B">ExpressionN</span>
<span style="color: #AA22FF; font-weight: bold">end</span>. 
</pre></div>


				</section>

				<section>
					<h3>Maintaining state</h3>
<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #00A000">loop</span>(<span style="color: #B8860B">State</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #AA22FF; font-weight: bold">receive</span>
        <span style="color: #B8860B">Pattern</span> <span style="color: #666666">-&gt;</span> 
            <span style="color: #B8860B">NewState</span> <span style="color: #666666">=</span> some_code (<span style="color: #B8860B">State</span>),
            loop (<span style="color: #B8860B">NewState</span>).
    <span style="color: #AA22FF; font-weight: bold">end</span>. 
</pre></div>





				</section>

				<section>

					<h3>Concurrency Example - a simple counter</h3>
					<!-- HTML generated using hilite.me --><div style="font-size: xx-large;float: left;background: #f8f8f8; overflow:auto;width:46%;border:solid gray;border-width:.1em .1em .1em .1em;padding:.2em .2em;"><pre style="width: 100%;margin: 0; line-height: 125%">-<span style="color: #999999; font-weight: bold">module</span>(counter).

-<span style="color: #999999; font-weight: bold">export</span>([create<span style="color: #666666">/0</span>, start<span style="color: #666666">/0</span>, delete<span style="color: #666666">/1</span>, increment<span style="color: #666666">/1</span>, count<span style="color: #666666">/1</span>, reset<span style="color: #666666">/1</span>]).

<span style="color: #00A000">create</span> () <span style="color: #666666">-&gt;</span>
    <span style="color: #AA22FF">spawn</span>(<span style="color: #666666">?</span><span style="color: #B8860B">MODULE</span>, start, []).

<span style="color: #00A000">start</span> () <span style="color: #666666">-&gt;</span> loop(<span style="color: #666666">0</span>).

<span style="color: #00A000">delete</span> (<span style="color: #B8860B">Pid</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">Pid</span> <span style="color: #666666">!</span> delete,
    ok.

<span style="color: #00A000">increment</span> (<span style="color: #B8860B">Pid</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">Pid</span> <span style="color: #666666">!</span> increment,
    ok.

<span style="color: #00A000">count</span> (<span style="color: #B8860B">Pid</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">Pid</span> <span style="color: #666666">!</span> {count, self()},
    <span style="color: #AA22FF; font-weight: bold">receive</span>
        {<span style="color: #B8860B">Pid</span>,{count, <span style="color: #B8860B">Count</span>}} <span style="color: #666666">-&gt;</span>
            <span style="color: #B8860B">Count</span>;
        _ <span style="color: #666666">-&gt;</span> error
    <span style="color: #AA22FF; font-weight: bold">end</span>.

<span style="color: #00A000">reset</span> (<span style="color: #B8860B">Pid</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #B8860B">Pid</span> <span style="color: #666666">!</span> reset,
    ok.
</pre></div>

<!-- HTML generated using hilite.me --><div style="font-size: xx-large;float: right;background: #f8f8f8; overflow:auto;width:50%;border:solid gray;border-width:.1em .1em .1em .1em;padding:.2em .2em;"><pre style="width: 100%;margin: 0; line-height: 125%"><span style="color: #00A000">loop</span>(<span style="color: #B8860B">Count</span>) <span style="color: #666666">-&gt;</span>
    <span style="color: #AA22FF; font-weight: bold">receive</span>
        delete <span style="color: #666666">-&gt;</span>
            ok;
        increment <span style="color: #666666">-&gt;</span>
            loop (<span style="color: #B8860B">Count</span><span style="color: #666666">+1</span>);
        {count, <span style="color: #B8860B">Pid</span>} <span style="color: #666666">-&gt;</span>
            <span style="color: #B8860B">Pid</span> <span style="color: #666666">!</span> {self(),{count, <span style="color: #B8860B">Count</span>}},
            loop (<span style="color: #B8860B">Count</span>);
        reset <span style="color: #666666">-&gt;</span>
            loop (<span style="color: #666666">0</span>);
        <span style="color: #B8860B">Unexpected</span> <span style="color: #666666">-&gt;</span>
            <span style="color: #0000FF; font-weight: bold">io</span>:<span style="color: #00A000">format</span> (<span style="color: #BB4444">&quot;Unexpected message: </span><span style="color: #BB6688; font-weight: bold">~p~n</span><span style="color: #BB4444">&quot;</span>, [<span style="color: #B8860B">Unexpected</span>]),
            loop (<span style="color: #B8860B">Count</span>)
    <span style="color: #AA22FF; font-weight: bold">end</span>.
</pre></div>




				</section>

				<section>
					<h3>links</h3>
					link
					spawn_link

				</section>

				<section>
					<h3>system processes</h3>
					trap exit signals and convert to messages

				</section>

				<section>
					<h3>Monitors</h3>

				</section>


				<section>
					<h2>Erlang: the system</h2>

				</section>

				<section>
						<h3>Erlang has a runtime system</h3> <p>that (among many other things):
							<ul>	
								<li>implements light-weight processes (a.k.a. green-threads, actors)</li>
								<li>isolates processes from each other</li>
								<li>efficiently utilises multi-core systems to achieve parallelism on top of concurrency</li>
								<li>can scale from multi-core to distributed with very little (if any) code change
								<li>allows new/ improved code to be hot-loaded</li>
								<li>has multiple facilities to integrate with other languages, esp C/Java/.NET</li>
							</ul>
						</p>  
					</section>

				<section>
					<h3>ERTS - Erlang Runtime System</h3>
					<ul>
						<li>written in C</li>
						<li>BEAM - Bogdan's Erlang Abstract Machine (VM)</li>
						<li>compilation to byte code</li>
						<ul>
							<li>interpreted, as it was views that the BEAM interpreter was fast enough</li>
							<li>more recently, a native JiT compiler has been used (HiPE)</li>
						</ul>
					</ul>

				</section>

				<section>
					<h3>Erlang processes and scheduler</h3>
					<ul>
						<li>Erlang processes are light-weight processes, ~300 words memory overhead each, created in microseconds</li>
						<li>ERTS manages links and messages between processes</li>
						<li>ERTS is a single OS process, uses one thread per CPU core for concurrency</li>
						<li>n:m mapping between Erlang processes and OS threads</li>
						<li>scheduler handles a pool of processes in a run queue</li>
						<li>processes can be moved between schedulers to load balance</li>
					</ul>

				</section>

				<section>
					<h3>I/O</h3>
						non-blocking event-based IO

				</section>

				<section>
					<h3>Memory Management</h3>
					<ul>
						<li>Erlang/ERTS manages memory automatically</li>
						<li>generational copying garbage collector</li>
							<ul>
								<li>two alternating heaps (to-space and from-space), only active memory is copied to to-space heap, from-space is wiped</li>
								<li>two generations of the heap</li>
								<ul>
									<li>shallow GC only looks at the current generation, after three GCs current will become old</li>
									<li>deep GC checks old as well, only triggered when shallow does not recycle enough memory</li>
								</ul>
							</ul>
						<li>process isolation means individual processes can be stopped for GC without others being affected</li>
						<li>short lived processes may never be GC'd (just deallocated)</li>
						<li>small processes are quick to GC</li>
					</ul>

				</section>

				<section>
					<h3>Hot module reloading</h3>
				</section>

				<section>
					<h2>Erlang: more advanced features</h2>

				</section>

				<section>
					<h3>Distributed Erlang</h3>
					<ul>
						<li>Erlang nodes - ERTS instance</li>
						<li>clusters of nodes with location service</li>
						<li>Pids are location transparent</li>
						<li>RPC and remote spawning have similar interface to local</li>
					</ul>

				</section>

				<section>
					<h3>ETS and DETS</h3>
					Erlang Term Storage, KV store with process interface

				</section>

				<section>
					<h3>Interfacing with other languages</h3>
					<ul>
						<li>C/C++ - NIFs, Port Programs, Linked In Port Drivers</li>
						<li>Java</li>
						<li>.Net</li>
						<li>other</li>
					</ul>

				</section>

				<section>
					<h3>Developer Tools</h3>
					<ul>
						<li>Process manager</li>
						<li>dbg tracers</li>
						<li>eunit</li>
						<li>build tools - rebar</li>
						<li>dialyzer</li>
					</ul>

				</section>

				<section>


				</section>



				<section>
					<h2>The OTP Libraries</h2>
					<p>
						
					</p>
				</section>

				<section>
						<h3>The OTP libraries</h3> <p>are a set of well-tested libraries (and design principles) that actually allow the Erlang platform to do what it says it can do on the box:
						<ul>
							<li>fault-tolerance</li>
							<li>high availability and up-time</li>
							<li>granular management of highly-concurrent systems</li>
							<li>live patching of systems in production!</li>
							<li>web-scale!</li>
						</ul>
						</p>
						<p>&nbsp;</p>
						<p>OTP is the <del>recommended</del> <b>only sane</b> way to develop non-trivial Erlang-based production software</p>

					</section>

					<section>Why</section>

					<section>behaviors</section>

					<section><h3>gen_server</h3>
						<ul><li>API</li>
						<li>Behavior interface (callback functions)</li>
						<li>internal</li></li></section>

					<section><h3>OTP applications</h3>
						<ul><li>directory structure</li>
						<li>start (usually supervisor) and stop</li></li></section>

					<section><h3>OTP supervisors</h3>
						<ul><li>supervision tree (gen_servers etc at the leaf nodes)</li>
						<li>fault tolerance</li></li></section>


					<section>Mnesia</section>




				<section>
					<h2>Uses outside Ericsson</h2>
					<p>
						
					</p>


				</section>

				<section>
					<h2>Next</h2>
					<p>
						
					</p>
				</section>

					<section>If you're only going to learn one functional language...</section>

					<section>Resources

						<p>Books - some really original names here!

							<p>Recommended:

								<p>Learn You Some Erlang for Great Good! - Fred Hebert
<p>
								Erlang and OTP in Action - Logan, Merritt &amp; Carlsson 
<p>
							For reference:

								<p>Programming Erlang - Joe Armstrong

								<p>Erlang Programming - Cesarini &amp; Thompson


						<p>Talks

							<p>Bernard from LCA

							<p>??

						<p>Movies
							<p>Erlang the Movie

							<p>Erlang the Movie II (warning - adult themes)




				</section>

				

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
